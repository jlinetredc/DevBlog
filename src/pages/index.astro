---
// src/pages/index.astro
import { getCollection } from 'astro:content';
import Page from './[page].astro';
import { SITE_CONFIG } from '../lib/constants';

// Chúng ta giả lập dữ liệu của trang 1 để render ngay tại index
const allPosts = await getCollection('blog');
const sortedPosts = allPosts.sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf());
const pageSize = SITE_CONFIG.pageSize;

const page = {
    data: sortedPosts.slice(0, pageSize),
    currentPage: 1,
    lastPage: Math.ceil(sortedPosts.length / pageSize),
    url: {
        prev: undefined,
        next: sortedPosts.length > pageSize ? '/2' : undefined
    }
};
---

<Page page={page} />